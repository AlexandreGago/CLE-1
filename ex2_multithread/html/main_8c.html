<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main file for the second problem.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;getopt.h&gt;</code><br />
<code>#include &quot;<a class="el" href="probConst_8h_source.html">probConst.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sharedRegion_8h_source.html">sharedRegion.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="merge_8h_source.html">merge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fifo_8h_source.html">fifo.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#amain_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWorkerArgs.html">WorkerArgs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A struct containing the arguments for worker threads.  <a href="structWorkerArgs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a15b16453216ed29570af03009e7c7c63"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a15b16453216ed29570af03009e7c7c63">worker</a> (void *arg)</td></tr>
<tr class="memdesc:a15b16453216ed29570af03009e7c7c63"><td class="mdescLeft">&#160;</td><td class="mdescRight">worker life cycle  <a href="main_8c.html#a15b16453216ed29570af03009e7c7c63">More...</a><br /></td></tr>
<tr class="separator:a15b16453216ed29570af03009e7c7c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc7d5acdee9ab8929719f3670135ca3"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a4bc7d5acdee9ab8929719f3670135ca3">distributor</a> (void *arg)</td></tr>
<tr class="memdesc:a4bc7d5acdee9ab8929719f3670135ca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">distributor life cycle  <a href="main_8c.html#a4bc7d5acdee9ab8929719f3670135ca3">More...</a><br /></td></tr>
<tr class="separator:a4bc7d5acdee9ab8929719f3670135ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9b016d10430b4f8e7b58770f522f8be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ae9b016d10430b4f8e7b58770f522f8be">printUsage</a> (char *programName)</td></tr>
<tr class="memdesc:ae9b016d10430b4f8e7b58770f522f8be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the usage of the program.  <a href="main_8c.html#ae9b016d10430b4f8e7b58770f522f8be">More...</a><br /></td></tr>
<tr class="separator:ae9b016d10430b4f8e7b58770f522f8be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function of the multi-threaded merge sort program.  <a href="main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8adda9db6d1fb7be6f86999c24c75ab0"><td class="memItemLeft" align="right" valign="top"><a id="a8adda9db6d1fb7be6f86999c24c75ab0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8adda9db6d1fb7be6f86999c24c75ab0">nThreads</a> = <a class="el" href="probConst_8h.html#ab9eade334fd8a98c128802aec7e9191c">MAXTHREADS</a></td></tr>
<tr class="memdesc:a8adda9db6d1fb7be6f86999c24c75ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of worker threads to be used for sorting. Default is MAXTHREADS. <br /></td></tr>
<tr class="separator:a8adda9db6d1fb7be6f86999c24c75ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad98ec23755377c7970c65b6fbb384752"><td class="memItemLeft" align="right" valign="top"><a id="ad98ec23755377c7970c65b6fbb384752"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ad98ec23755377c7970c65b6fbb384752">fifoSize</a> = <a class="el" href="probConst_8h.html#a6092455278a1ac67204e0dbe08f9d13f">FIFO_SIZE</a></td></tr>
<tr class="memdesc:ad98ec23755377c7970c65b6fbb384752"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the FIFO buffers to be used. Default is FIFO_SIZE. <br /></td></tr>
<tr class="separator:ad98ec23755377c7970c65b6fbb384752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779bfbbb688cf46720cfb65109ea4858"><td class="memItemLeft" align="right" valign="top"><a id="a779bfbbb688cf46720cfb65109ea4858"></a>
pthread_barrier_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a></td></tr>
<tr class="memdesc:a779bfbbb688cf46720cfb65109ea4858"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pthread_barrier_t variable used to synchronize worker threads. <br /></td></tr>
<tr class="separator:a779bfbbb688cf46720cfb65109ea4858"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main file for the second problem. </p>
<p>This program reads an array from a file and sorts it using a multi-threaded merge sort algorithm. The number of threads to be used can be specified as a command line argument. </p><dl class="section author"><dt>Author</dt><dd>Bernardo Kaluza </dd>
<dd>
Alexandre Gago </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4bc7d5acdee9ab8929719f3670135ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bc7d5acdee9ab8929719f3670135ca3">&#9670;&nbsp;</a></span>distributor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * distributor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>distributor life cycle </p>
<p>The distributor function that reads the input file and distributes the data to worker threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main function of the multi-threaded merge sort program. </p>
<p>Initializes the shared region, creates the distributor and worker threads, and waits for them to finish. Finally, it validates if the final array is sorted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of command line arguments. </td></tr>
    <tr><td class="paramname">argv</td><td>An array of command line argument strings. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if the program runs successfully, and 1 if there's an error. </dd></dl>

</div>
</div>
<a id="ae9b016d10430b4f8e7b58770f522f8be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9b016d10430b4f8e7b58770f522f8be">&#9670;&nbsp;</a></span>printUsage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printUsage </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>programName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the usage of the program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">programName</td><td>The name of the program as a char pointer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a15b16453216ed29570af03009e7c7c63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b16453216ed29570af03009e7c7c63">&#9670;&nbsp;</a></span>worker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * worker </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>worker life cycle </p>
<p>The worker function for the merge sort algorithm.</p>
<p>This function is the life cycle of a worker thread. It gets an unsorted array from the unsorted fifo and sorts it using the merge sort algorithm. Then it pushes the sorted array in the sorted fifo. After all threads have finished sorting, they merge the sorted subarrays back together. The id of the thread determines at each step if it should merge 2 of the arrays. The process ends when the original array is sorted and merged back together. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>A pointer to the <a class="el" href="structWorkerArgs.html" title="A struct containing the arguments for worker threads.">WorkerArgs</a> structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
